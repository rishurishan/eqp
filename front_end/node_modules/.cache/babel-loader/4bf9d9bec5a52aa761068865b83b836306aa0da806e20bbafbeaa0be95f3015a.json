{"ast":null,"code":"import axios from \"axios\";\nimport { BASE_URL } from \"../api/urls\";\n// import { refreshToken } from '../api/refresh';\n// import { toast } from 'react-toastify';\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  }\n});\napi.interceptors.response.use(response => response, async error => {\n  const originalRequest = error.config;\n  //   const refresh = sessionStorage.getItem('refresh_token');\n  if (error.response.status === 401) {\n    const accessToken = sessionStorage.getItem(\"token\");\n    originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n    return api(originalRequest);\n  } else {\n    sessionStorage.clear();\n    window.location.href = \"/\";\n  }\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","BASE_URL","api","create","baseURL","headers","Accept","interceptors","response","use","error","originalRequest","config","status","accessToken","sessionStorage","getItem","Authorization","clear","window","location","href","Promise","reject"],"sources":["/home/mohammed/Downloads/medical-report-frontend-main/front_end/src/services/interceptor.js"],"sourcesContent":["import axios from \"axios\";\nimport { BASE_URL } from \"../api/urls\";\n// import { refreshToken } from '../api/refresh';\n// import { toast } from 'react-toastify';\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n    //   const refresh = sessionStorage.getItem('refresh_token');\n    if (error.response.status === 401) {\n      const accessToken = sessionStorage.getItem(\"token\");\n      originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n\n      return api(originalRequest);\n    } else {\n      sessionStorage.clear();\n      window.location.href = \"/\";\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,aAAa;AACtC;AACA;;AAEA,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EACvBC,OAAO,EAAEH,QAAQ;EACjBI,OAAO,EAAE;IACPC,MAAM,EAAE,kBAAkB;IAC1B,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEFJ,GAAG,CAACK,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC1BD,QAAQ,IAAKA,QAAQ,EACtB,MAAOE,KAAK,IAAK;EACf,MAAMC,eAAe,GAAGD,KAAK,CAACE,MAAM;EACpC;EACA,IAAIF,KAAK,CAACF,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;IACjC,MAAMC,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;IACnDL,eAAe,CAACN,OAAO,CAACY,aAAa,GAAI,UAASH,WAAY,EAAC;IAE/D,OAAOZ,GAAG,CAACS,eAAe,CAAC;EAC7B,CAAC,MAAM;IACLI,cAAc,CAACG,KAAK,CAAC,CAAC;IACtBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;EAC5B;EACA,OAAOC,OAAO,CAACC,MAAM,CAACb,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeR,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}